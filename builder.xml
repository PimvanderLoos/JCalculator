<?xml version="1.0" ?>
<project name="JCalculator" default="generateParserScanner" basedir=".">
    <taskdef name="jflex" classname="jflex.anttask.JFlexTask" classpath="${basedir}/lib/jflex-1.7.0.jar"/>
    <taskdef name="cup" classname="java_cup.anttask.CUPTask" classpath="${basedir}/lib/java-cup-11a.jar"/>

    <target name="init">
        <mkdir dir="${basedir}/bin"/>
    </target>

    <target name="generateScanner">
        <jflex file="${basedir}/src/main/java/nl/pim16aap2/jcalculator/scanner.jflex"
               destdir="${basedir}/src/main/java/"/>
    </target>

    <target name="generateParser">
        <cup srcfile="${basedir}/src/main/java/nl/pim16aap2/jcalculator/parser.cup"
             destdir="${basedir}/src/main/java/" interface="true" parser="parser"/>
    </target>

    <target name="editParser" depends="generateParser">
        <replaceregexp file="${basedir}/src/main/java/nl/pim16aap2/jcalculator/parser.java"
                       match="public class" replace="class" byline="false"/>
        <replaceregexp file="${basedir}/src/main/java/nl/pim16aap2/jcalculator/sym.java"
                       match="public interface" replace="interface" byline="false"/>
    </target>

    <target name="generateParserScanner" depends="generateScanner, generateParser, editParser"/>
</project>
